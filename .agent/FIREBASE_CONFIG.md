---
title: Налаштування Firebase Console
description: Опис ручних налаштувань у консолі Firebase, які впливають на логіку автентифікації та безпеки.
type: documentation
created: 2025-02-04
updated: 2025-02-04
---

# Налаштування Firebase Console

Цей документ фіксує критичні налаштування проекту в консолі Firebase, які не відображаються в коді, але безпосередньо впливають на роботу сервісів `AuthService` та `SyncService`.

## 1. Автентифікація (Authentication)

### Об'єднання акаунтів (User account linking)

- **Налаштування:** `Link accounts that use the same email` (Об'єднувати акаунти, що використовують ту саму пошту).
- **Дата зміни:** 2025-02-04
- **Вплив на систему:**
  - Якщо користувач реєструється через Email/Пароль, а потім заходить через Google з тією ж поштою — Firebase намагається **об'єднати** їх в один UID.
  - Це запобігає втраті прогресу при зміні методу входу.
  - `SyncService` буде працювати з єдиним джерелом даних для обох методів входу.
  - При першому вході через Google для вже існуючого Email-акаунта може знадобитися "Linking" (який ми вже налаштували в `AuthService`).

### Захист від перебору (Email Enumeration Protection)

- **Статус:** Рекомендовано **ВИМКНУТИ** (Disabled) для роботи точної діагностики.
- **Вплив на систему:**
  - Дозволяє методу `AuthService.getProvidersForEmail` точно визначати, чи існує акаунт і чи використовує він Google.
  - Забезпечує точні повідомлення про помилки в UI (замість загального "Невірний email або пароль").

## 2. Firestore Database

### Індекси

- Для роботи лідерборду та пошуку друзів налаштовані складені індекси (Composite indexes) у колекції `profiles`.

## 3. Безпека (Security Rules)

- **Firestore:** Дозволено читання/запис лише власнику документа (`request.auth.uid == userId`).
- **Публічні профілі:** Дозволено читання всім залогіненим користувачам, запис — тільки власнику.
